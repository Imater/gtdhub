<div class="card-wrap card-wrap-first" ng-controller="CardsTreeCtrl">
  <div ng-if="tree = trees">
      <div class="card-line-wrap always-visible" ng-include="'/card-line.html'"></div>
  </div>
</div>


<script type="text/ng-template" id="/card-line.html">
    <div class="card-row"
         ng-class="{'row-open':row.showChilds}"
         ng-repeat="row in tree.childs | pmkr.partition:COL_AMOUNT">
      <div ng-repeat="tree in row" class="card-line">
        <div class="title-wrap bottom-color-{{tree.colorIndex}}"
          ng-class="{active: row.showChilds.id == tree.id}">
          <div class="card-text">
            {{tree.text}}
          </div>
          <div class="title-bottom"
               ng-click="toggleOpenChilds(row, tree)">
            {{tree.title}} ({{tree.childs.length}})
          </div>
          <div class="arrow_box">
            &nbsp;
          </div>
        </div>
      </div>
      <div ng-if="tree = row.showChilds"
           jq-show-effect1="tree"
           jq-options="{type:'slide', duration:200, delay:50, hideImmediately: true}"
           class="card-line-wrap background-color-{{tree.colorIndex}}">
        <div class="card-path">
          <span ng-repeat="path in tree.getPath()">{{path}} <i class="fa fa-angle-right"></i> </span>
          <span>{{tree.title}}</span>
        </div>
        <div class="" ng-include="'/card-line.html'"></div>
      </div>
    </div>
</script>


 <!--
 <div class="card-wrap" ng-controller="CardsTreeCtrl">
  <div ng-if="tree = trees">
    <div class="card-line-wrap" ng-include="'/card-line.html'"></div>
  </div>
</div>


<script type="text/ng-template" id="/card-line.html">
  <div class="card-row" ng-repeat="row in tree.childs | pmkr.partition:3">

    <div class="card-line">
      <div class="title-wrap"
         ng-class="{active:$stateParams.id==tree.id}">
        {{row.treeSelected.title}}
        <div class="title-bottom"
             style="background: {{tree.background}}"
             ng-click="toggleOpenChilds(row, tree)">
          <span class="title">{{tree.title}}</span>
          <span ng-if="tree.childs.length">({{tree.childs.length}}) [{{$index}}]</span>
        </div>

      </div>
    </div>

    <div class="card-ul" ng-if="row.treeSelected&&row2.treeSelected.childs" style="background: {{treeSelected.background}}">
      <div class="card-row" ng-repeat="row in ro w.treeSelected.childs | pmkr.partition:2">
        <div ng-repeat="tree in row" class="card-li">
          <div class="card-line-wrap" ng-include="'/card-line.html'"></div>
        </div>
      </div>
    </div>


  </div>
</script>

 -->


